<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lin_api (qcheck-lin.Lin_api)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">qcheck-lin</a> &#x00BB; Lin_api</nav><header class="odoc-preamble"><h1>Module <code><span>Lin_api</span></code></h1><p>The <code>Lin_api</code> module allows the user to describe the type signature of a tested module interface using a DSL of type combinators.</p></header><nav class="odoc-toc"><ul><li><a href="#type-representing-values">Type-representing values</a></li><li><a href="#values-representing-api-functions">Values representing API functions</a></li><li><a href="#api-description">API description</a></li><li><a href="#generation-of-linearizability-testing-module-from-an-api">Generation of linearizability testing module from an API</a></li></ul></nav><div class="odoc-content"><h2 id="type-representing-values"><a href="#type-representing-values" class="anchor"></a>Type-representing values</h2><div class="odoc-spec"><div class="spec type" id="type-constructible" class="anchored"><a href="#type-constructible" class="anchor"></a><code><span><span class="keyword">type</span> constructible</span><span> = </span><span>|</span></code></div><div class="spec-doc"><p>Type definition to denote whether a described type can be generated</p></div></div><div class="odoc-spec"><div class="spec type" id="type-deconstructible" class="anchored"><a href="#type-deconstructible" class="anchor"></a><code><span><span class="keyword">type</span> deconstructible</span><span> = </span><span>|</span></code></div><div class="spec-doc"><p>Type definition to denote whether a described type can be deconstructed, i.e., tested for equality.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-combinable" class="anchored"><a href="#type-combinable" class="anchor"></a><code><span><span class="keyword">type</span> combinable</span></code></div><div class="spec-doc"><p>Type definition to denote that a described type can be composed with other combinators such as <code>list</code>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-noncombinable" class="anchored"><a href="#type-noncombinable" class="anchor"></a><code><span><span class="keyword">type</span> noncombinable</span></code></div><div class="spec-doc"><p>Type definition to denote that a described type cannot be composed with other combinators such as <code>list</code>.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-ty" class="anchored"><a href="#type-ty" class="anchor"></a><code><span><span class="keyword">type</span> <span>(_, _, _, _) ty</span></span></code></div><div class="spec-doc"><p>Type definition for type-describing combinators. <code>(typ,con,styp,comb) ty</code> represents a type <code>typ</code> and with an underlying state of type <code>styp</code>. The <code>con</code> type parameter indicates whether the combinator type is <code>constructible</code> or <code>deconstructible</code>. The <code>comb</code> type parameter indicates whether the combinator type is <code>combinable</code> or <code>noncombinable</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-gen" class="anchored"><a href="#val-gen" class="anchor"></a><code><span><span class="keyword">val</span> gen : 
  <span><span><span class="type-var">'a</span> <span class="xref-unresolved">QCheck</span>.arbitrary</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p><code>gen arb to_str</code> builds a <code>constructible</code> and <code>combinable</code> type combinator from a QCheck generator <code>arb</code> and a to-string function <code>to_str</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-deconstructible" class="anchored"><a href="#val-deconstructible" class="anchor"></a><code><span><span class="keyword">val</span> deconstructible : 
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p><code>deconstructible to_str eq</code> builds a <code>deconstructible</code> and <code>combinable</code> type combinator from a to-string function <code>to_str</code> and an equality predicate <code>eq</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-gen_deconstructible" class="anchored"><a href="#val-gen_deconstructible" class="anchor"></a><code><span><span class="keyword">val</span> gen_deconstructible : 
  <span><span><span class="type-var">'a</span> <span class="xref-unresolved">QCheck</span>.arbitrary</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p><code>gen_deconstructible arb to_str eq</code> builds a <code>combinable</code> type combinator from a QCheck generator <code>arb</code>, a to-string function <code>to_str</code> and an equality predicate <code>eq</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unit" class="anchored"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span><span>( unit, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>unit</code> combinator represents the <code>unit</code> type</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bool" class="anchored"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span><span>( bool, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>bool</code> combinator represents the <code>bool</code> type</p></div></div><div class="odoc-spec"><div class="spec value" id="val-char" class="anchored"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span><span>( char, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>char</code> combinator represents the <code>char</code> type. It uses a uniform generator based on <code>QCheck.char</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-char_printable" class="anchored"><a href="#val-char_printable" class="anchor"></a><code><span><span class="keyword">val</span> char_printable : <span><span>( char, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>char_printable</code> combinator represents the <code>char</code> type. The generated characters have character codes 32-126 or 10 (newline) and are based on <code>QCheck.printable_char</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nat_small" class="anchored"><a href="#val-nat_small" class="anchor"></a><code><span><span class="keyword">val</span> nat_small : <span><span>( int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>nat_small</code> combinator represents the <code>int</code> type. The generated integers are non-negative, less than 100, and are based on <code>QCheck.small_nat</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int" class="anchored"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span><span>( int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int</code> combinator represents the <code>int</code> type. It uses a uniform generator based on <code>QCheck.int</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int_small" class="anchored"><a href="#val-int_small" class="anchor"></a><code><span><span class="keyword">val</span> int_small : <span><span>( int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int_small</code> combinator represents the <code>int</code> type. The generated integers are non-negative (unsigned) and are based on <code>QCheck.small_int</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int_pos" class="anchored"><a href="#val-int_pos" class="anchor"></a><code><span><span class="keyword">val</span> int_pos : <span><span>( int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int_pos</code> combinator represents the <code>int</code> type. The generated integers are non-negative (unsigned) and uniformly distributed. It is based on <code>QCheck.pos_int</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int_bound" class="anchored"><a href="#val-int_bound" class="anchor"></a><code><span><span class="keyword">val</span> int_bound : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>( int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int_bound b</code> combinator represents the <code>int</code> type. The generated integers are range between <code>0</code> and <code>b</code>, inclusive. It uses a uniform generator based on <code>QCheck.int_bound</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int32" class="anchored"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span><span>( <span class="xref-unresolved">Stdlib</span>.Int32.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int32</code> combinator represents the <code>int32</code> type. It uses a uniform generator based on <code>QCheck.int32</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int64" class="anchored"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span><span>( <span class="xref-unresolved">Stdlib</span>.Int64.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int64</code> combinator represents the <code>int64</code> type. It uses a uniform generator based on <code>QCheck.int64</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nat64_small" class="anchored"><a href="#val-nat64_small" class="anchor"></a><code><span><span class="keyword">val</span> nat64_small : <span><span>( <span class="xref-unresolved">Stdlib</span>.Int64.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>nat64_small</code> combinator represents the <code>int64</code> type. The generated integers are non-negative (unsigned) and are based on <code>QCheck.small_nat</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-float" class="anchored"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span><span>( float, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>float</code> combinator represents the <code>float</code> type. The generated floating point numbers do not include nan and infinitites, It is based on <code>QCheck.float</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string" class="anchored"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span><span>( <span class="xref-unresolved">Stdlib</span>.String.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>string</code> combinator represents the <code>string</code> type. The generated strings have a size generated from <code>QCheck.Gen.nat</code> and characters resulting from <code>QCheck.char</code>. It is based on <code>QCheck.string</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string_small" class="anchored"><a href="#val-string_small" class="anchor"></a><code><span><span class="keyword">val</span> string_small : <span><span>( <span class="xref-unresolved">Stdlib</span>.String.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>small_string</code> combinator represents the <code>string</code> type. The generated strings have a size generated from <code>QCheck.Gen.small_nat</code> and characters resulting from <code>QCheck.char</code>. It is based on <code>QCheck.small_string</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string_small_printable" class="anchored"><a href="#val-string_small_printable" class="anchor"></a><code><span><span class="keyword">val</span> string_small_printable : <span><span>( <span class="xref-unresolved">Stdlib</span>.String.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>small_string</code> combinator represents the <code>string</code> type. The generated strings have a size generated from <code>QCheck.Gen.small_nat</code> and characters resulting from <code>QCheck.printable_char</code>. It is based on <code>QCheck.small_printable_string</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-option" class="anchored"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : 
  <span>?ratio:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> option</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>option</code> combinator represents the <code>option</code> type. The generated values from <code>option t</code> are either <code>Some v</code> or <code>None</code> with <code>v</code> being generated by the <code>t</code> combinator. An optional <code>ratio</code> allow to change the default <code>0.85</code> <code>Some</code>s. It is based on <code>QCheck.option</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-opt" class="anchored"><a href="#val-opt" class="anchor"></a><code><span><span class="keyword">val</span> opt : 
  <span>?ratio:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> option</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>opt</code> combinator is an alias for <code>option</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-list" class="anchored"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> list</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>list</code> combinator represents the <code>list</code> type. The generated lists from <code>list t</code> have a length resulting from <code>QCheck.Gen.nat</code> and have their elements generated by the <code>t</code> combinator. It is based on <code>QCheck.list</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-array" class="anchored"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : 
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> array</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>array</code> combinator represents the <code>array</code> type. The generated arrays from <code>array t</code> have a length resulting from <code>QCheck.Gen.nat</code> and have their elements generated by the <code>t</code> combinator. It is based on <code>QCheck.array</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-seq" class="anchored"><a href="#val-seq" class="anchor"></a><code><span><span class="keyword">val</span> seq : 
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>seq</code> combinator represents the <code>Seq.t</code> type. The generated sequences from <code>seq t</code> have a length resulting from <code>QCheck.Gen.nat</code> and have their elements generated by the <code>t</code> combinator.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-t" class="anchored"><a href="#val-t" class="anchor"></a><code><span><span class="keyword">val</span> t : <span><span>( <span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'a</span>, <a href="#type-noncombinable">noncombinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>t</code> combinator represents the type <code>ApiSpec.t</code> of the system under test.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-state" class="anchored"><a href="#val-state" class="anchor"></a><code><span><span class="keyword">val</span> state : <span><span>( <span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'a</span>, <a href="#type-noncombinable">noncombinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>state</code> combinator represents the type <code>ApiSpec.t</code> of the system under test. It is an alias for the <code>t</code> combinator.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-or_exn" class="anchored"><a href="#val-or_exn" class="anchor"></a><code><span><span class="keyword">val</span> or_exn : 
  <span><span><span>( <span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span>( <span class="type-var">'a</span>, exn )</span> <span class="xref-unresolved">Stdlib</span>.result</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>or_exn</code> combinator transforms a result type representing <code>t</code> into a <code>(t, exn) result</code> type.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print_result" class="anchored"><a href="#val-print_result" class="anchor"></a><code><span><span class="keyword">val</span> print_result : 
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> string )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p><code>print_result pa pb</code> creates a to-string function for a <code>(a,b) result</code> type given two to-string functions for <code>a</code>s and <code>b</code>s, respectively.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print" class="anchored"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <span class="type-var">'comb</span> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Given a description of type <code>'a</code>, print a value of type <code>'a</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span><span>( <span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'s</span>, <span class="type-var">'comb</span> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Given a description of type <code>'a</code>, compare two values of type <code>'a</code>.</p></div></div><h2 id="values-representing-api-functions"><a href="#values-representing-api-functions" class="anchor"></a>Values representing API functions</h2><div class="odoc-spec"><div class="spec module" id="module-Fun" class="anchored"><a href="#module-Fun" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Fun/index.html">Fun</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-returning" class="anchored"><a href="#val-returning" class="anchor"></a><code><span><span class="keyword">val</span> returning : 
  <span><span><span>( <span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'a</span>, <span class="type-var">'a</span>, <span class="type-var">'b</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning t</code> represents a pure return type.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-returning_or_exc" class="anchored"><a href="#val-returning_or_exc" class="anchor"></a><code><span><span class="keyword">val</span> returning_or_exc : 
  <span><span><span>( <span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'a</span>, <span><span>( <span class="type-var">'a</span>, exn )</span> <span class="xref-unresolved">Stdlib</span>.result</span>, <span class="type-var">'b</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning_or_exc t</code> represents a return type of a function that may raise an exception.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-returning_" class="anchored"><a href="#val-returning_" class="anchor"></a><code><span><span class="keyword">val</span> returning_ : <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'a</span>, unit, <span class="type-var">'c</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning_ t</code> represents a return type that should be ignored.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-returning_or_exc_" class="anchored"><a href="#val-returning_or_exc_" class="anchor"></a><code><span><span class="keyword">val</span> returning_or_exc_ : 
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'a</span>, <span><span>( unit, exn )</span> <span class="xref-unresolved">Stdlib</span>.result</span>, <span class="type-var">'c</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning_or_exc_ t</code> represents a return type that should be ignored of a function that may raise an exception.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-(@-&gt;)" class="anchored"><a href="#val-(@-&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (@-&gt;) : 
  <span><span><span>( <span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'b</span>, <span class="type-var">'c</span> )</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'d</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>at @-&gt; rt</code> represents a function type expecting an argument <code>at</code> and returning <code>rt</code>.</p></div></div><h2 id="api-description"><a href="#api-description" class="anchor"></a>API description</h2><div class="odoc-spec"><div class="spec type" id="type-elem" class="anchored"><a href="#type-elem" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ elem</span></span><span> = <span class="keyword">private</span> </span></code><table><tr id="type-elem.Elem" class="anchored"><td class="def variant constructor"><a href="#type-elem.Elem" class="anchor"></a><code><span>| </span><span><span class="constructor">Elem</span> : string * <span><span>( <span class="type-var">'ftyp</span>, <span class="type-var">'r</span>, <span class="type-var">'s</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span> * <span class="type-var">'ftyp</span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'s</span> <a href="#type-elem">elem</a></span></span></code></td></tr></table></div><div class="spec-doc"><p>Type and constructor to capture a single function signature</p></div></div><div class="odoc-spec"><div class="spec type" id="type-api" class="anchored"><a href="#type-api" class="anchor"></a><code><span><span class="keyword">type</span> <span>'s api</span></span><span> = <span><span>(int * <span><span class="type-var">'s</span> <a href="#type-elem">elem</a></span>)</span> list</span></span></code></div><div class="spec-doc"><p>The type of module signatures</p></div></div><div class="odoc-spec"><div class="spec value" id="val-val_" class="anchored"><a href="#val-val_" class="anchor"></a><code><span><span class="keyword">val</span> val_ : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'f</span>, <span class="type-var">'r</span>, <span class="type-var">'s</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span> <span class="arrow">&#45;&gt;</span></span> int * <span><span class="type-var">'s</span> <a href="#type-elem">elem</a></span></span></code></div><div class="spec-doc"><p><code>val_ str f sig</code> describes a function signature from a string <code>str</code>, a function value <code>f</code>, and a signature description <code>sig</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-val_freq" class="anchored"><a href="#val-val_freq" class="anchor"></a><code><span><span class="keyword">val</span> val_freq : <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'f</span>, <span class="type-var">'r</span>, <span class="type-var">'s</span> )</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span> <span class="arrow">&#45;&gt;</span></span> int * <span><span class="type-var">'s</span> <a href="#type-elem">elem</a></span></span></code></div><div class="spec-doc"><p><code>val_ freq w str f sig</code> describes a function signature like <code>val_ str f sig</code> but with weight <code>w</code>.</p></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-ApiSpec" class="anchored"><a href="#module-type-ApiSpec" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-ApiSpec/index.html">ApiSpec</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The required description of a module signature</p></div></div><h2 id="generation-of-linearizability-testing-module-from-an-api"><a href="#generation-of-linearizability-testing-module-from-an-api" class="anchor"></a>Generation of linearizability testing module from an API</h2><div class="odoc-spec"><div class="spec module" id="module-MakeCmd" class="anchored"><a href="#module-MakeCmd" class="anchor"></a><code><span><span class="keyword">module</span> <a href="MakeCmd/index.html">MakeCmd</a></span><span> (<a href="MakeCmd/argument-1-ApiSpec/index.html">ApiSpec</a> : <a href="module-type-ApiSpec/index.html">ApiSpec</a>) : <a href="../Lin/module-type-CmdSpec/index.html">Lin.CmdSpec</a></span></code></div><div class="spec-doc"><p>Functor to map a combinator-based module signature description into a raw <code>Lin</code> description</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Make" class="anchored"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-ApiSpec/index.html">ApiSpec</a> : <a href="module-type-ApiSpec/index.html">ApiSpec</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Functor to create linearizability tests from an combinator-based module signature description</p></div></div></div></body></html>