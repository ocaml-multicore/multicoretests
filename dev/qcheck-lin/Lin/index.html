<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lin (qcheck-lin.Lin)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">qcheck-lin</a> &#x00BB; Lin</nav><header class="odoc-preamble"><h1>Module <code><span>Lin</span></code></h1><p>This module allows the user to describe the type signature of a tested module interface using a DSL of type combinators.</p></header><nav class="odoc-toc"><ul><li><a href="#type-representing-values">Type-representing values</a><ul><li><a href="#type-combinators">Type combinators</a></li></ul></li><li><a href="#values-representing-api-functions">Values representing API functions</a></li><li><a href="#api-description">API description</a></li><li><a href="#generating-a-linearization-testing-module-from-an-api">Generating a linearization testing module from an API</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Internal"><a href="#module-Internal" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Internal/index.html">Internal</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Internal module to build test representations. This module is exposed for internal uses only, its API may change at any time.</p></div></div><h2 id="type-representing-values"><a href="#type-representing-values" class="anchor"></a>Type-representing values</h2><div class="odoc-spec"><div class="spec type anchored" id="type-constructible"><a href="#type-constructible" class="anchor"></a><code><span><span class="keyword">type</span> constructible</span><span> = </span><span>|</span></code></div><div class="spec-doc"><p>Type definition to denote whether a described type can be generated</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-deconstructible"><a href="#type-deconstructible" class="anchor"></a><code><span><span class="keyword">type</span> deconstructible</span><span> = </span><span>|</span></code></div><div class="spec-doc"><p>Type definition to denote whether a described type can be deconstructed, i.e., tested for equality.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-combinable"><a href="#type-combinable" class="anchor"></a><code><span><span class="keyword">type</span> combinable</span></code></div><div class="spec-doc"><p>Type definition to denote that a described type can be composed with other combinators such as <a href="#val-list"><code>list</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-noncombinable"><a href="#type-noncombinable" class="anchor"></a><code><span><span class="keyword">type</span> noncombinable</span></code></div><div class="spec-doc"><p>Type definition to denote that a described type cannot be composed with other combinators such as <a href="#val-list"><code>list</code></a>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ty"><a href="#type-ty" class="anchor"></a><code><span><span class="keyword">type</span> <span>(_, _, _, _) ty</span></span></code></div><div class="spec-doc"><p>Type definition for type-describing combinators. <code>(typ,con,styp,comb) ty</code> represents a type <code>typ</code> and with an underlying state of type <code>styp</code>. The <code>con</code> type parameter indicates whether the combinator type is <a href="#type-constructible"><code>constructible</code></a> or <a href="#val-deconstructible"><code>deconstructible</code></a>. The <code>comb</code> type parameter indicates whether the combinator type is <a href="#type-combinable"><code>combinable</code></a> or <a href="#type-noncombinable"><code>noncombinable</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gen"><a href="#val-gen" class="anchor"></a><code><span><span class="keyword">val</span> gen : 
  <span><span><span class="type-var">'a</span> <span class="xref-unresolved">QCheck</span>.arbitrary</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p><code>gen arb to_str</code> builds a <a href="#type-constructible"><code>constructible</code></a> and <a href="#type-combinable"><code>combinable</code></a> type combinator from a QCheck generator <code>arb</code> and a to-string function <code>to_str</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-deconstructible"><a href="#val-deconstructible" class="anchor"></a><code><span><span class="keyword">val</span> deconstructible : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p><code>deconstructible to_str eq</code> builds a <a href="#val-deconstructible"><code>deconstructible</code></a> and <a href="#type-combinable"><code>combinable</code></a> type combinator from a to-string function <code>to_str</code> and an equality predicate <code>eq</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gen_deconstructible"><a href="#val-gen_deconstructible" class="anchor"></a><code><span><span class="keyword">val</span> gen_deconstructible : 
  <span><span><span class="type-var">'a</span> <span class="xref-unresolved">QCheck</span>.arbitrary</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p><code>gen_deconstructible arb to_str eq</code> builds a <a href="#type-combinable"><code>combinable</code></a> type combinator from a QCheck generator <code>arb</code>, a to-string function <code>to_str</code> and an equality predicate <code>eq</code>.</p></div></div><h3 id="type-combinators"><a href="#type-combinators" class="anchor"></a>Type combinators</h3><div class="odoc-spec"><div class="spec value anchored" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span><span>(unit, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>unit</code> combinator represents the <span class="xref-unresolved"><code>unit</code></span> type</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span><span>(bool, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>bool</code> combinator represents the <span class="xref-unresolved"><code>bool</code></span> type</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-char"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span><span>(char, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>char</code> combinator represents the <span class="xref-unresolved"><code>char</code></span> type. It uses a uniform generator based on <code>QCheck</code>.char.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-char_printable"><a href="#val-char_printable" class="anchor"></a><code><span><span class="keyword">val</span> char_printable : <span><span>(char, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>char_printable</code> combinator represents the <span class="xref-unresolved"><code>char</code></span> type. The generated characters have character codes 32-126 or 10 (newline) and are based on <code>QCheck</code>.printable_char.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nat_small"><a href="#val-nat_small" class="anchor"></a><code><span><span class="keyword">val</span> nat_small : <span><span>(int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>nat_small</code> combinator represents the <span class="xref-unresolved"><code>int</code></span> type. The generated integers are non-negative, less than 100, and are based on <code>QCheck</code>.small_nat.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span><span>(int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int</code> combinator represents the <span class="xref-unresolved"><code>int</code></span> type. It uses a uniform generator based on <code>QCheck</code>.int.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int_small"><a href="#val-int_small" class="anchor"></a><code><span><span class="keyword">val</span> int_small : <span><span>(int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int_small</code> combinator represents the <span class="xref-unresolved"><code>int</code></span> type. The generated integers are non-negative and are based on <code>QCheck</code>.small_int.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int_pos"><a href="#val-int_pos" class="anchor"></a><code><span><span class="keyword">val</span> int_pos : <span><span>(int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int_pos</code> combinator represents the <span class="xref-unresolved"><code>int</code></span> type. The generated integers are non-negative and uniformly distributed. It is based on <code>QCheck</code>.pos_int.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int_bound"><a href="#val-int_bound" class="anchor"></a><code><span><span class="keyword">val</span> int_bound : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(int, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int_bound b</code> combinator represents the <span class="xref-unresolved"><code>int</code></span> type. The generated integers range from <code>0</code> to <code>b</code>, inclusive. It uses a uniform generator based on <code>QCheck</code>.int_bound.</p><p>Note: the result of <code>int_bound my_bound</code> cannot be used both as an argument type and as a result type in type signature descriptions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span><span>(<span class="xref-unresolved">Stdlib</span>.Int32.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int32</code> combinator represents the <span class="xref-unresolved"><code>int32</code></span> type. It uses a uniform generator based on <code>QCheck</code>.int32.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span><span>(<span class="xref-unresolved">Stdlib</span>.Int64.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>int64</code> combinator represents the <span class="xref-unresolved"><code>int64</code></span> type. It uses a uniform generator based on <code>QCheck</code>.int64.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nat64_small"><a href="#val-nat64_small" class="anchor"></a><code><span><span class="keyword">val</span> nat64_small : <span><span>(<span class="xref-unresolved">Stdlib</span>.Int64.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>nat64_small</code> combinator represents the <span class="xref-unresolved"><code>int64</code></span> type. The generated integers are non-negative and are based on <code>QCheck</code>.small_nat.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span><span>(float, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>float</code> combinator represents the <span class="xref-unresolved"><code>float</code></span> type. The generated floating point numbers do not include nan and infinities. It is based on <code>QCheck</code>.float.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span><span>(<span class="xref-unresolved">Stdlib</span>.String.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>string</code> combinator represents the <span class="xref-unresolved"><code>string</code></span> type. The generated strings have a size generated from <code>QCheck</code>.Gen.nat and characters resulting from <code>QCheck</code>.Gen.char. It is based on <code>QCheck</code>.string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_small"><a href="#val-string_small" class="anchor"></a><code><span><span class="keyword">val</span> string_small : <span><span>(<span class="xref-unresolved">Stdlib</span>.String.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>string_small</code> combinator represents the <span class="xref-unresolved"><code>string</code></span> type. The generated strings have a size generated from <code>QCheck</code>.Gen.small_nat and characters resulting from <code>QCheck</code>.Gen.char. It is based on <code>QCheck</code>.small_string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_small_printable"><a href="#val-string_small_printable" class="anchor"></a><code><span><span class="keyword">val</span> string_small_printable : <span><span>(<span class="xref-unresolved">Stdlib</span>.String.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>string_small_printable</code> combinator represents the <span class="xref-unresolved"><code>string</code></span> type. The generated strings have a size generated from <code>QCheck</code>.Gen.small_nat and characters resulting from <code>QCheck</code>.Gen.printable. It is based on <code>QCheck</code>.small_printable_string.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bytes"><a href="#val-bytes" class="anchor"></a><code><span><span class="keyword">val</span> bytes : <span><span>(<span class="xref-unresolved">Stdlib</span>.Bytes.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>bytes</code> combinator represents the <span class="xref-unresolved"><code>bytes</code></span> type. The generated byte strings have a size generated from <code>QCheck</code>.Gen.nat and characters resulting from <code>QCheck</code>.Gen.char. It is based on <code>QCheck</code>.bytes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bytes_small"><a href="#val-bytes_small" class="anchor"></a><code><span><span class="keyword">val</span> bytes_small : <span><span>(<span class="xref-unresolved">Stdlib</span>.Bytes.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>bytes_small</code> combinator represents the <span class="xref-unresolved"><code>bytes</code></span> type. The generated byte strings have a size generated from <code>QCheck</code>.Gen.small_nat and characters resulting from <code>QCheck</code>.Gen.char. It is based on <code>QCheck</code>.bytes_small.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bytes_small_printable"><a href="#val-bytes_small_printable" class="anchor"></a><code><span><span class="keyword">val</span> bytes_small_printable : <span><span>(<span class="xref-unresolved">Stdlib</span>.Bytes.t, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>bytes_small_printable</code> combinator represents the <span class="xref-unresolved"><code>string</code></span> type. The generated byte strings have a size generated from <code>QCheck</code>.Gen.small_nat and characters resulting from <code>QCheck</code>.Gen.printable. It is based on <code>QCheck</code>.bytes_small_of.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-option"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : 
  <span>?ratio:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> option</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>option</code> combinator represents the <span class="xref-unresolved"><code>option</code></span> type. The generated values from <code>option t</code> are either <code>Some v</code> or <code>None</code> with <code>v</code> being generated by the <code>t</code> combinator. An optional <code>ratio</code> allows to change the default <code>0.85</code> <code>Some</code>s. It is based on <code>QCheck</code>.option.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opt"><a href="#val-opt" class="anchor"></a><code><span><span class="keyword">val</span> opt : 
  <span>?ratio:float <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> option</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>opt</code> combinator is an alias for <a href="#val-option"><code>option</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> list</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>list</code> combinator represents the <span class="xref-unresolved"><code>list</code></span> type. The generated lists from <code>list t</code> have a length resulting from <code>QCheck</code>.Gen.nat and have their elements generated by the <code>t</code> combinator. It is based on <code>QCheck</code>.list.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> array</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>array</code> combinator represents the <span class="xref-unresolved"><code>array</code></span> type. The generated arrays from <code>array t</code> have a length resulting from <code>QCheck</code>.Gen.nat and have their elements generated by the <code>t</code> combinator. It is based on <code>QCheck</code>.array.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-seq"><a href="#val-seq" class="anchor"></a><code><span><span class="keyword">val</span> seq : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>seq</code> combinator represents the <code>Stdlib</code>.Seq.t type. The generated sequences from <code>seq t</code> have a length resulting from <code>QCheck</code>.Gen.nat and have their elements generated by the <code>t</code> combinator.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t"><a href="#val-t" class="anchor"></a><code><span><span class="keyword">val</span> t : <span><span>(<span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'a</span>, <a href="#type-noncombinable">noncombinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>t</code> combinator represents the type <a href="module-type-Spec/index.html#type-t"><code>Spec.t</code></a> of the system under test.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-state"><a href="#val-state" class="anchor"></a><code><span><span class="keyword">val</span> state : <span><span>(<span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'a</span>, <a href="#type-noncombinable">noncombinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>state</code> combinator represents the type <a href="module-type-Spec/index.html#type-t"><code>Spec.t</code></a> of the system under test. It is an alias for the <code>t</code> combinator.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-or_exn"><a href="#val-or_exn" class="anchor"></a><code><span><span class="keyword">val</span> or_exn : 
  <span><span><span>(<span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>(<span class="type-var">'a</span>, exn)</span> <span class="xref-unresolved">Stdlib</span>.result</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'c</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span></span></code></div><div class="spec-doc"><p>The <code>or_exn</code> combinator transforms a result type representing <code>t</code> into a <code>(t, exn)</code> <span class="xref-unresolved"><code>result</code></span> type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_result"><a href="#val-print_result" class="anchor"></a><code><span><span class="keyword">val</span> print_result : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> string)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p><code>print_result pa pb</code> creates a to-string function for a <code>(a,b)</code> <span class="xref-unresolved"><code>result</code></span> type given two to-string functions for <code>a</code>s and <code>b</code>s, respectively.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'c</span>, <span class="type-var">'s</span>, <span class="type-var">'comb</span>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Given a description of type <code>'a</code>, print a value of type <code>'a</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><span><span>(<span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'s</span>, <span class="type-var">'comb</span>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Given a description of type <code>'a</code>, compare two values of type <code>'a</code>.</p></div></div><h2 id="values-representing-api-functions"><a href="#values-representing-api-functions" class="anchor"></a>Values representing API functions</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Fun"><a href="#module-Fun" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Fun/index.html">Fun</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-returning"><a href="#val-returning" class="anchor"></a><code><span><span class="keyword">val</span> returning : <span><span><span>(<span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning t</code> represents a pure return type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-returning_or_exc"><a href="#val-returning_or_exc" class="anchor"></a><code><span><span class="keyword">val</span> returning_or_exc : 
  <span><span><span>(<span class="type-var">'a</span>, <a href="#type-deconstructible">deconstructible</a>, <span class="type-var">'b</span>, <a href="#type-combinable">combinable</a>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span><span>(<span class="type-var">'a</span>, exn)</span> <span class="xref-unresolved">Stdlib</span>.result</span>, <span class="type-var">'b</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning_or_exc t</code> represents a return type of a function that may raise an exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-returning_"><a href="#val-returning_" class="anchor"></a><code><span><span class="keyword">val</span> returning_ : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, unit, <span class="type-var">'c</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning_ t</code> represents a return type that should be ignored.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-returning_or_exc_"><a href="#val-returning_or_exc_" class="anchor"></a><code><span><span class="keyword">val</span> returning_or_exc_ : 
  <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span>, <span><span>(unit, exn)</span> <span class="xref-unresolved">Stdlib</span>.result</span>, <span class="type-var">'c</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>returning_or_exc_ t</code> represents a return type that should be ignored of a function that may raise an exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(@-&gt;)"><a href="#val-(@-&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (@-&gt;) : 
  <span><span><span>(<span class="type-var">'a</span>, <a href="#type-constructible">constructible</a>, <span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-ty">ty</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'d</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span></span></code></div><div class="spec-doc"><p><code>at @-&gt; rt</code> represents a function type expecting an argument <code>at</code> and returning <code>rt</code>.</p></div></div><h2 id="api-description"><a href="#api-description" class="anchor"></a>API description</h2><div class="odoc-spec"><div class="spec type anchored" id="type-elem"><a href="#type-elem" class="anchor"></a><code><span><span class="keyword">type</span> <span>!_ elem</span></span></code></div><div class="spec-doc"><p>Type and constructor to capture a single function signature</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-api"><a href="#type-api" class="anchor"></a><code><span><span class="keyword">type</span> <span>'s api</span></span><span> = <span><span>(int * <span><span class="type-var">'s</span> <a href="#type-elem">elem</a></span>)</span> list</span></span></code></div><div class="spec-doc"><p>The type of module signatures</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-val_"><a href="#val-val_" class="anchor"></a><code><span><span class="keyword">val</span> val_ : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'f</span>, <span class="type-var">'r</span>, <span class="type-var">'s</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span> <span class="arrow">&#45;&gt;</span></span> int * <span><span class="type-var">'s</span> <a href="#type-elem">elem</a></span></span></code></div><div class="spec-doc"><p><code>val_ str f sig</code> describes a function signature from a string <code>str</code>, a function value <code>f</code>, and a signature description <code>sig</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-val_freq"><a href="#val-val_freq" class="anchor"></a><code><span><span class="keyword">val</span> val_freq : <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'f</span>, <span class="type-var">'r</span>, <span class="type-var">'s</span>)</span> <a href="Fun/index.html#type-fn">Fun.fn</a></span> <span class="arrow">&#45;&gt;</span></span> int * <span><span class="type-var">'s</span> <a href="#type-elem">elem</a></span></span></code></div><div class="spec-doc"><p><code>val_freq w str f sig</code> describes a function signature like <a href="#val-val_"><code>val_</code></a> <code>str f sig</code> but with relative weight <code>w</code> rather than 1. A function of weight 2 will have twice the probability of being invoked compared to a function of weight 1.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Spec"><a href="#module-type-Spec" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Spec/index.html">Spec</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The required description of a module signature</p></div></div><h2 id="generating-a-linearization-testing-module-from-an-api"><a href="#generating-a-linearization-testing-module-from-an-api" class="anchor"></a>Generating a linearization testing module from an API</h2><div class="odoc-spec"><div class="spec module anchored" id="module-MakeCmd"><a href="#module-MakeCmd" class="anchor"></a><code><span><span class="keyword">module</span> <a href="MakeCmd/index.html">MakeCmd</a></span><span> (<a href="MakeCmd/argument-1-Spec/index.html">Spec</a> : <a href="module-type-Spec/index.html">Spec</a>) : <a href="Internal/module-type-CmdSpec/index.html">Internal.CmdSpec</a></span></code></div><div class="spec-doc"><p>Functor to map a combinator-based module signature description into a raw <a href="#"><code>Lin</code></a> description. This functor is exposed for internal uses only, its API may change at any time.</p></div></div></div></body></html>